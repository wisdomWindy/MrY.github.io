var e,t,a,s,n,o,r,i=Object.defineProperty,l=(e,t,a)=>(((e,t,a)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a),d=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},c=(e,t,a)=>(d(e,t,"read from private field"),a?a.call(e):t.get(e)),u=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},p=(e,t,a,s)=>(d(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a);import{b as f,u as m,i as h,_ as y,w as g,s as E,d as v,m as w,y as b,T as R,z as L,a as T,E as _,A as I,B as D,n as C,C as x,D as O,r as A}from"./index.3939c552.1699407705341.js";import{u as k,E as M,a as N}from"./el-button.c118474d.1699407705341.js";import{I as U,f as F,v as S,x as B,J as W,V as j,X as $,Q as P,y as z,O as G,u as H,a1 as X,Z,_ as q,ad as V,r as J,p as Q,w as Y,W as K,P as ee,Y as te,a7 as ae,S as se,a8 as ne,q as oe,D as re,E as ie,ai as le,a5 as de}from"./vue.94dea421.1699407705341.js";import"./pinia.e784caaf.1699407705341.js";import"./isObject.63b203b5.1699407705341.js";const ce={},ue=f({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),pe=["textContent"],fe=U({name:"ElBadge"});const me=g(y(U({...fe,props:ue,setup(e,{expose:t}){const a=e,s=m("badge"),n=F((()=>a.isDot?"":h(a.value)&&h(a.max)&&a.max<a.value?`${a.max}+`:`${a.value}`));return t({content:n}),(e,t)=>(S(),B("div",{class:G(H(s).b())},[W(e.$slots,"default"),j(q,{name:`${H(s).namespace.value}-zoom-in-center`,persisted:""},{default:$((()=>[P(z("sup",{class:G([H(s).e("content"),H(s).em("content",e.type),H(s).is("fixed",!!e.$slots.default),H(s).is("dot",e.isDot)]),textContent:X(H(n))},null,10,pe),[[Z,!e.hidden&&(H(n)||e.isDot)]])])),_:1},8,["name"])],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]])),he=["success","info","warning","error"],ye=w({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:b?document.body:void 0}),ge=f({customClass:{type:String,default:ye.customClass},center:{type:Boolean,default:ye.center},dangerouslyUseHTMLString:{type:Boolean,default:ye.dangerouslyUseHTMLString},duration:{type:Number,default:ye.duration},icon:{type:E,default:ye.icon},id:{type:String,default:ye.id},message:{type:v([String,Object,Function]),default:ye.message},onClose:{type:v(Function),required:!1},showClose:{type:Boolean,default:ye.showClose},type:{type:String,values:he,default:ye.type},offset:{type:Number,default:ye.offset},zIndex:{type:Number,default:ye.zIndex},grouping:{type:Boolean,default:ye.grouping},repeatNum:{type:Number,default:ye.repeatNum}}),Ee=V([]),ve=e=>{const{prev:t}=(e=>{const t=Ee.findIndex((t=>t.id===e)),a=Ee[t];let s;return t>0&&(s=Ee[t-1]),{current:a,prev:s}})(e);return t?t.vm.exposed.bottom.value:0},we=["id"],be=["innerHTML"],Re=U({name:"ElMessage"});var Le=y(U({...Re,props:ge,emits:{destroy:()=>!0},setup(e,{expose:t}){const a=e,{Close:s}=I,{ns:n,zIndex:o}=k("message"),{currentZIndex:r,nextZIndex:i}=o,l=J(),d=J(!1),c=J(0);let u;const p=F((()=>a.type?"error"===a.type?"danger":a.type:"info")),f=F((()=>{const e=a.type;return{[n.bm("icon",e)]:e&&R[e]}})),m=F((()=>a.icon||R[a.type]||"")),h=F((()=>ve(a.id))),y=F((()=>((e,t)=>Ee.findIndex((t=>t.id===e))>0?20:t)(a.id,a.offset)+h.value)),g=F((()=>c.value+y.value)),E=F((()=>({top:`${y.value}px`,zIndex:r.value})));function v(){0!==a.duration&&({stop:u}=D((()=>{b()}),a.duration))}function w(){null==u||u()}function b(){d.value=!1}return Q((()=>{v(),i(),d.value=!0})),Y((()=>a.repeatNum),(()=>{w(),v()})),L(document,"keydown",(function({code:e}){e===C.esc&&b()})),T(l,(()=>{c.value=l.value.getBoundingClientRect().height})),t({visible:d,bottom:g,close:b}),(e,t)=>(S(),K(q,{name:H(n).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[0]||(t[0]=t=>e.$emit("destroy")),persisted:""},{default:$((()=>[P(z("div",{id:e.id,ref_key:"messageRef",ref:l,class:G([H(n).b(),{[H(n).m(e.type)]:e.type&&!e.icon},H(n).is("center",e.center),H(n).is("closable",e.showClose),e.customClass]),style:ee(H(E)),role:"alert",onMouseenter:w,onMouseleave:v},[e.repeatNum>1?(S(),K(H(me),{key:0,value:e.repeatNum,type:H(p),class:G(H(n).e("badge"))},null,8,["value","type","class"])):te("v-if",!0),H(m)?(S(),K(H(_),{key:1,class:G([H(n).e("icon"),H(f)])},{default:$((()=>[(S(),K(ae(H(m))))])),_:1},8,["class"])):te("v-if",!0),W(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(S(),B(se,{key:1},[te(" Caution here, message could've been compromised, never use user's input as message "),z("p",{class:G(H(n).e("content")),innerHTML:e.message},null,10,be)],2112)):(S(),B("p",{key:0,class:G(H(n).e("content"))},X(e.message),3))])),e.showClose?(S(),K(H(_),{key:2,class:G(H(n).e("closeBtn")),onClick:ne(b,["stop"])},{default:$((()=>[j(H(s))])),_:1},8,["class","onClick"])):te("v-if",!0)],46,we),[[Z,d.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Te=1;const _e=e=>{const t=!e||oe(e)||re(e)||ie(e)?{message:e}:e,a={...ye,...t};if(a.appendTo){if(oe(a.appendTo)){let e=document.querySelector(a.appendTo);x(e)||(e=document.body),a.appendTo=e}}else a.appendTo=document.body;return a},Ie=({appendTo:e,...t},a)=>{const s="message_"+Te++,n=t.onClose,o=document.createElement("div"),r={...t,id:s,onClose:()=>{null==n||n(),(e=>{const t=Ee.indexOf(e);if(-1===t)return;Ee.splice(t,1);const{handler:a}=e;a.close()})(c)},onDestroy:()=>{le(null,o)}},i=j(Le,r,ie(r.message)||re(r.message)?{default:ie(r.message)?r.message:()=>r.message}:null);i.appContext=a||De._context,le(i,o),e.appendChild(o.firstElementChild);const l=i.component,d={close:()=>{l.exposed.visible.value=!1}},c={id:s,vnode:i,vm:l,handler:d,props:i.component.props};return c},De=(e={},t)=>{if(!b)return{close:()=>{}};if(h(ce.max)&&Ee.length>=ce.max)return{close:()=>{}};const a=_e(e);if(a.grouping&&Ee.length){const e=Ee.find((({vnode:e})=>{var t;return(null==(t=e.props)?void 0:t.message)===a.message}));if(e)return e.props.repeatNum+=1,e.props.type=a.type,e.handler}const s=Ie(a,t);return Ee.push(s),s.handler};he.forEach((e=>{De[e]=(t={},a)=>{const s=_e(t);return De({...s,type:e},a)}})),De.closeAll=function(e){for(const t of Ee)e&&e!==t.props.type||t.handler.close()},De._context=null;const Ce=O(De,"$message");var xe,Oe;(Oe=xe||(xe={})).LOAD="LOAD",Oe.EXEC="EXEC",Oe.WRITE_FILE="WRITE_FILE",Oe.READ_FILE="READ_FILE",Oe.DELETE_FILE="DELETE_FILE",Oe.RENAME="RENAME",Oe.CREATE_DIR="CREATE_DIR",Oe.LIST_DIR="LIST_DIR",Oe.DELETE_DIR="DELETE_DIR",Oe.ERROR="ERROR",Oe.DOWNLOAD="DOWNLOAD",Oe.PROGRESS="PROGRESS",Oe.LOG="LOG",Oe.MOUNT="MOUNT",Oe.UNMOUNT="UNMOUNT";const Ae=(()=>{let e=0;return()=>e++})(),ke=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Me=new Error("called FFmpeg.terminate()");class Ne{constructor(){u(this,e,null),u(this,t,{}),u(this,a,{}),u(this,s,[]),u(this,n,[]),l(this,"loaded",!1),u(this,o,(()=>{c(this,e)&&(c(this,e).onmessage=({data:{id:e,type:o,data:r}})=>{switch(o){case xe.LOAD:this.loaded=!0,c(this,t)[e](r);break;case xe.MOUNT:case xe.UNMOUNT:case xe.EXEC:case xe.WRITE_FILE:case xe.READ_FILE:case xe.DELETE_FILE:case xe.RENAME:case xe.CREATE_DIR:case xe.LIST_DIR:case xe.DELETE_DIR:c(this,t)[e](r);break;case xe.LOG:c(this,s).forEach((e=>e(r)));break;case xe.PROGRESS:c(this,n).forEach((e=>e(r)));break;case xe.ERROR:c(this,a)[e](r)}delete c(this,t)[e],delete c(this,a)[e]})})),u(this,r,(({type:s,data:n},o=[],r)=>c(this,e)?new Promise(((i,l)=>{const d=Ae();c(this,e)&&c(this,e).postMessage({id:d,type:s,data:n},o),c(this,t)[d]=i,c(this,a)[d]=l,null==r||r.addEventListener("abort",(()=>{l(new DOMException(`Message # ${d} was aborted`,"AbortError"))}),{once:!0})})):Promise.reject(ke))),l(this,"load",((t={},{signal:a}={})=>(c(this,e)||(p(this,e,new Worker(new URL("/assets/worker-e696880d.js",self.location),{type:"module"})),c(this,o).call(this)),c(this,r).call(this,{type:xe.LOAD,data:t},void 0,a)))),l(this,"exec",((e,t=-1,{signal:a}={})=>c(this,r).call(this,{type:xe.EXEC,data:{args:e,timeout:t}},void 0,a))),l(this,"terminate",(()=>{const s=Object.keys(c(this,a));for(const e of s)c(this,a)[e](Me),delete c(this,a)[e],delete c(this,t)[e];c(this,e)&&(c(this,e).terminate(),p(this,e,null),this.loaded=!1)})),l(this,"writeFile",((e,t,{signal:a}={})=>{const s=[];return t instanceof Uint8Array&&s.push(t.buffer),c(this,r).call(this,{type:xe.WRITE_FILE,data:{path:e,data:t}},s,a)})),l(this,"mount",((e,t,a)=>c(this,r).call(this,{type:xe.MOUNT,data:{fsType:e,options:t,mountPoint:a}},[]))),l(this,"unmount",(e=>c(this,r).call(this,{type:xe.UNMOUNT,data:{mountPoint:e}},[]))),l(this,"readFile",((e,t="binary",{signal:a}={})=>c(this,r).call(this,{type:xe.READ_FILE,data:{path:e,encoding:t}},void 0,a))),l(this,"deleteFile",((e,{signal:t}={})=>c(this,r).call(this,{type:xe.DELETE_FILE,data:{path:e}},void 0,t))),l(this,"rename",((e,t,{signal:a}={})=>c(this,r).call(this,{type:xe.RENAME,data:{oldPath:e,newPath:t}},void 0,a))),l(this,"createDir",((e,{signal:t}={})=>c(this,r).call(this,{type:xe.CREATE_DIR,data:{path:e}},void 0,t))),l(this,"listDir",((e,{signal:t}={})=>c(this,r).call(this,{type:xe.LIST_DIR,data:{path:e}},void 0,t))),l(this,"deleteDir",((e,{signal:t}={})=>c(this,r).call(this,{type:xe.DELETE_DIR,data:{path:e}},void 0,t)))}on(e,t){"log"===e?c(this,s).push(t):"progress"===e&&c(this,n).push(t)}off(e,t){"log"===e?p(this,s,c(this,s).filter((e=>e!==t))):"progress"===e&&p(this,n,c(this,n).filter((e=>e!==t)))}}e=new WeakMap,t=new WeakMap,a=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap;const Ue=new Error("failed to get response body reader"),Fe=new Error("failed to complete download"),Se=async e=>{let t;if("string"==typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0))):await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await(a=e,new Promise(((e,t)=>{const s=new FileReader;s.onload=()=>{const{result:t}=s;t instanceof ArrayBuffer?e(new Uint8Array(t)):e(new Uint8Array)},s.onerror=e=>{var a,s;t(Error(`File could not be read! Code=${(null==(s=null==(a=null==e?void 0:e.target)?void 0:a.error)?void 0:s.code)||-1}`))},s.readAsArrayBuffer(a)})))}var a;return new Uint8Array(t)},Be=async(e,t,a=!1,s)=>{const n=a?await(async(e,t)=>{var a;const s=await fetch(e);let n;try{const o=parseInt(s.headers.get("Content-Length")||"-1"),r=null==(a=s.body)?void 0:a.getReader();if(!r)throw Ue;const i=[];let l=0;for(;;){const{done:a,value:s}=await r.read(),n=s?s.length:0;if(a){if(-1!=o&&o!==l)throw Fe;t&&t({url:e,total:o,received:l,delta:n,done:a});break}i.push(s),l+=n,t&&t({url:e,total:o,received:l,delta:n,done:a})}const d=new Uint8Array(l);let c=0;for(const e of i)d.set(e,c),c+=e.length;n=d.buffer}catch(o){n=await s.arrayBuffer(),t&&t({url:e,total:n.byteLength,received:n.byteLength,delta:0,done:!0})}return n})(e,s):await(await fetch(e)).arrayBuffer(),o=new Blob([n],{type:t});return URL.createObjectURL(o)},We={class:"video-transform"},je="https://unpkg.com/@ffmpeg/core@0.12.2/dist/umd",$e=A(U({__name:"VideoTransform",setup(e){const t=J(),a=new Ne;async function s(e){try{await a.load({coreURL:await Be(`${je}/ffmpeg-core.js`,"text/javascript"),wasmURL:await Be(`${je}/ffmpeg-core.wasm`,"application/wasm")});let s=await Se(e.raw);await a.writeFile("input.wmv",s),await a.exec(["-i","input.wmv","-f","mp4","output.mp4"]);const n=await a.readFile("output.mp4");t.value&&(t.value.src=URL.createObjectURL(new Blob([n],{type:"video/mp4"})))}catch(s){Ce.error({message:s.message})}}return(e,a)=>{const n=N,o=M;return S(),B("div",We,[j(o,{ref:"uploadRef",class:"upload-demo",accept:"video/*","auto-upload":!1,"on-change":s},{trigger:$((()=>[j(n,{type:"primary"},{default:$((()=>[de("select file")])),_:1})])),_:1},512),z("video",{class:"video",ref_key:"video",ref:t},null,512)])}}}),[["__scopeId","data-v-ce04f4cd"]]);export{$e as default};
