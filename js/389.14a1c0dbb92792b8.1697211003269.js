"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[389],{7389:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var r=a(4081),i=a(100);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=s(e,"string");return"symbol"===n(t)?t:String(t)}function l(e,t,a){return t=o(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(e,t,a){c(e,t),t.set(e,a)}function u(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}function f(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function d(e,t,a){var r=f(e,t,"set");return u(e,r,a),a}function p(e,t){return t.get?t.get.call(e):t.value}function E(e,t){var a=f(e,t,"get");return p(e,a)}var w;(function(e){e["LOAD"]="LOAD",e["EXEC"]="EXEC",e["WRITE_FILE"]="WRITE_FILE",e["READ_FILE"]="READ_FILE",e["DELETE_FILE"]="DELETE_FILE",e["RENAME"]="RENAME",e["CREATE_DIR"]="CREATE_DIR",e["LIST_DIR"]="LIST_DIR",e["DELETE_DIR"]="DELETE_DIR",e["ERROR"]="ERROR",e["DOWNLOAD"]="DOWNLOAD",e["PROGRESS"]="PROGRESS",e["LOG"]="LOG"})(w||(w={}));const y=(()=>{let e=0;return()=>e++})(),m=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),b=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");var R=new WeakMap,v=new WeakMap,L=new WeakMap,g=new WeakMap,D=new WeakMap,I=new WeakMap,_=new WeakMap;class A{constructor(){h(this,R,{writable:!0,value:null}),h(this,v,{writable:!0,value:{}}),h(this,L,{writable:!0,value:{}}),h(this,g,{writable:!0,value:[]}),h(this,D,{writable:!0,value:[]}),l(this,"loaded",!1),h(this,I,{writable:!0,value:()=>{E(this,R)&&(E(this,R).onmessage=({data:{id:e,type:t,data:a}})=>{switch(t){case w.LOAD:this.loaded=!0,E(this,v)[e](a);break;case w.EXEC:case w.WRITE_FILE:case w.READ_FILE:case w.DELETE_FILE:case w.RENAME:case w.CREATE_DIR:case w.LIST_DIR:case w.DELETE_DIR:E(this,v)[e](a);break;case w.LOG:E(this,g).forEach((e=>e(a)));break;case w.PROGRESS:E(this,D).forEach((e=>e(a)));break;case w.ERROR:E(this,L)[e](a);break}delete E(this,v)[e],delete E(this,L)[e]})}}),h(this,_,{writable:!0,value:({type:e,data:t},a=[])=>E(this,R)?new Promise(((r,i)=>{const n=y();E(this,R)&&E(this,R).postMessage({id:n,type:e,data:t},a),E(this,v)[n]=r,E(this,L)[n]=i})):Promise.reject(m)}),l(this,"load",((e={})=>(E(this,R)||(d(this,R,new Worker(new URL(a.p+a.u(401),a.b),{type:void 0})),E(this,I).call(this)),E(this,_).call(this,{type:w.LOAD,data:e})))),l(this,"exec",((e,t=-1)=>E(this,_).call(this,{type:w.EXEC,data:{args:e,timeout:t}}))),l(this,"terminate",(()=>{const e=Object.keys(E(this,L));for(const t of e)E(this,L)[t](b),delete E(this,L)[t],delete E(this,v)[t];E(this,R)&&(E(this,R).terminate(),d(this,R,null),this.loaded=!1)})),l(this,"writeFile",((e,t)=>{const a=[];return t instanceof Uint8Array&&a.push(t.buffer),E(this,_).call(this,{type:w.WRITE_FILE,data:{path:e,data:t}},a)})),l(this,"readFile",((e,t="binary")=>E(this,_).call(this,{type:w.READ_FILE,data:{path:e,encoding:t}}))),l(this,"deleteFile",(e=>E(this,_).call(this,{type:w.DELETE_FILE,data:{path:e}}))),l(this,"rename",((e,t)=>E(this,_).call(this,{type:w.RENAME,data:{oldPath:e,newPath:t}}))),l(this,"createDir",(e=>E(this,_).call(this,{type:w.CREATE_DIR,data:{path:e}}))),l(this,"listDir",(e=>E(this,_).call(this,{type:w.LIST_DIR,data:{path:e}}))),l(this,"deleteDir",(e=>E(this,_).call(this,{type:w.DELETE_DIR,data:{path:e}})))}on(e,t){"log"===e?E(this,g).push(t):"progress"===e&&E(this,D).push(t)}off(e,t){"log"===e?d(this,g,E(this,g).filter((e=>e!==t))):"progress"===e&&d(this,D,E(this,D).filter((e=>e!==t)))}}const T=new Error("failed to get response body reader"),k=new Error("failed to complete download"),F="Content-Length",O=e=>new Promise(((t,a)=>{const r=new FileReader;r.onload=()=>{const{result:e}=r;e instanceof ArrayBuffer?t(new Uint8Array(e)):t(new Uint8Array)},r.onerror=e=>{a(Error(`File could not be read! Code=${e?.target?.error?.code||-1}`))},r.readAsArrayBuffer(e)})),S=async e=>{let t;if("string"===typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0))):await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await O(e)}return new Uint8Array(t)},W=async(e,t)=>{const a=await fetch(e);let r;try{const i=parseInt(a.headers.get(F)||"-1"),n=a.body?.getReader();if(!n)throw T;const s=[];let o=0;for(;;){const{done:a,value:r}=await n.read(),l=r?r.length:0;if(a){if(-1!=i&&i!==o)throw k;t&&t({url:e,total:i,received:o,delta:l,done:a});break}s.push(r),o+=l,t&&t({url:e,total:i,received:o,delta:l,done:a})}const l=new Uint8Array(o);let c=0;for(const e of s)l.set(e,c),c+=e.length;r=l.buffer}catch(i){r=await a.arrayBuffer(),t&&t({url:e,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},U=async(e,t,a=!1,r)=>{const i=a?await W(e,r):await(await fetch(e)).arrayBuffer(),n=new Blob([i],{type:t});return URL.createObjectURL(n)};var C=a(1103);const M={class:"video-transform"},j=(0,r.Uk)("select file");var P={setup(e){const t=(0,i.iH)(null),a=new A,n="https://unpkg.com/@ffmpeg/core@0.12.2/dist/umd";async function s(e){try{await a.load({coreURL:await U(`${n}/ffmpeg-core.js`,"text/javascript"),wasmURL:await U(`${n}/ffmpeg-core.wasm`,"application/wasm")});let r=await S(e.raw);await a.writeFile("input.wmv",r),await a.exec(["-i","input.wmv","-f","mp4","output.mp4"]);const i=await a.readFile("output.mp4");t.value.src=URL.createObjectURL(new Blob([i.buffer],{type:"video/mp4"}))}catch(r){C.z8.error({message:r.message})}}return(e,a)=>{const i=(0,r.up)("el-button"),n=(0,r.up)("el-upload");return(0,r.wg)(),(0,r.iD)("div",M,[(0,r.Wm)(n,{ref:(e,t)=>{t["uploadRef"]=e},class:"upload-demo",accept:"video/*","auto-upload":!1,"on-change":s},{trigger:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary"},{default:(0,r.w5)((()=>[j])),_:1})])),_:1},512),(0,r._)("video",{class:"video",ref:(e,a)=>{a["video"]=e,t.value=e}},null,512)])}}},B=a(9110);const N=(0,B.Z)(P,[["__scopeId","data-v-60d1a494"]]);var G=N}}]);