"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[590],{6590:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var r=a(8191),i=(a(5813),a(4950),a(7318)),n=(a(817),a(311));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e,t){if("object"!==s(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e){var t=o(e,"string");return"symbol"===s(t)?t:String(t)}function c(e,t,a){return t=l(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(e,t,a){h(e,t),t.set(e,a)}function u(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}function d(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function p(e,t,a){var r=d(e,t,"set");return u(e,r,a),a}function E(e,t){return t.get?t.get.call(e):t.value}function w(e,t){var a=d(e,t,"get");return E(e,a)}var y;(function(e){e["LOAD"]="LOAD",e["EXEC"]="EXEC",e["WRITE_FILE"]="WRITE_FILE",e["READ_FILE"]="READ_FILE",e["DELETE_FILE"]="DELETE_FILE",e["RENAME"]="RENAME",e["CREATE_DIR"]="CREATE_DIR",e["LIST_DIR"]="LIST_DIR",e["DELETE_DIR"]="DELETE_DIR",e["ERROR"]="ERROR",e["DOWNLOAD"]="DOWNLOAD",e["PROGRESS"]="PROGRESS",e["LOG"]="LOG"})(y||(y={}));const m=(()=>{let e=0;return()=>e++})(),R=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),b=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");var v=new WeakMap,L=new WeakMap,g=new WeakMap,D=new WeakMap,I=new WeakMap,A=new WeakMap,_=new WeakMap;class T{constructor(){f(this,v,{writable:!0,value:null}),f(this,L,{writable:!0,value:{}}),f(this,g,{writable:!0,value:{}}),f(this,D,{writable:!0,value:[]}),f(this,I,{writable:!0,value:[]}),c(this,"loaded",!1),f(this,A,{writable:!0,value:()=>{w(this,v)&&(w(this,v).onmessage=({data:{id:e,type:t,data:a}})=>{switch(t){case y.LOAD:this.loaded=!0,w(this,L)[e](a);break;case y.EXEC:case y.WRITE_FILE:case y.READ_FILE:case y.DELETE_FILE:case y.RENAME:case y.CREATE_DIR:case y.LIST_DIR:case y.DELETE_DIR:w(this,L)[e](a);break;case y.LOG:w(this,D).forEach((e=>e(a)));break;case y.PROGRESS:w(this,I).forEach((e=>e(a)));break;case y.ERROR:w(this,g)[e](a);break}delete w(this,L)[e],delete w(this,g)[e]})}}),f(this,_,{writable:!0,value:({type:e,data:t},a=[])=>w(this,v)?new Promise(((r,i)=>{const n=m();w(this,v)&&w(this,v).postMessage({id:n,type:e,data:t},a),w(this,L)[n]=r,w(this,g)[n]=i})):Promise.reject(R)}),c(this,"load",((e={})=>(w(this,v)||(p(this,v,new Worker(new URL(a.p+a.u(401),a.b),{type:void 0})),w(this,A).call(this)),w(this,_).call(this,{type:y.LOAD,data:e})))),c(this,"exec",((e,t=-1)=>w(this,_).call(this,{type:y.EXEC,data:{args:e,timeout:t}}))),c(this,"terminate",(()=>{const e=Object.keys(w(this,g));for(const t of e)w(this,g)[t](b),delete w(this,g)[t],delete w(this,L)[t];w(this,v)&&(w(this,v).terminate(),p(this,v,null),this.loaded=!1)})),c(this,"writeFile",((e,t)=>{const a=[];return t instanceof Uint8Array&&a.push(t.buffer),w(this,_).call(this,{type:y.WRITE_FILE,data:{path:e,data:t}},a)})),c(this,"readFile",((e,t="binary")=>w(this,_).call(this,{type:y.READ_FILE,data:{path:e,encoding:t}}))),c(this,"deleteFile",(e=>w(this,_).call(this,{type:y.DELETE_FILE,data:{path:e}}))),c(this,"rename",((e,t)=>w(this,_).call(this,{type:y.RENAME,data:{oldPath:e,newPath:t}}))),c(this,"createDir",(e=>w(this,_).call(this,{type:y.CREATE_DIR,data:{path:e}}))),c(this,"listDir",(e=>w(this,_).call(this,{type:y.LIST_DIR,data:{path:e}}))),c(this,"deleteDir",(e=>w(this,_).call(this,{type:y.DELETE_DIR,data:{path:e}})))}on(e,t){"log"===e?w(this,D).push(t):"progress"===e&&w(this,I).push(t)}off(e,t){"log"===e?p(this,D,w(this,D).filter((e=>e!==t))):"progress"===e&&p(this,I,w(this,I).filter((e=>e!==t)))}}const k=new Error("failed to get response body reader"),F=new Error("failed to complete download"),O="Content-Length",S=e=>new Promise(((t,a)=>{const r=new FileReader;r.onload=()=>{const{result:e}=r;e instanceof ArrayBuffer?t(new Uint8Array(e)):t(new Uint8Array)},r.onerror=e=>{a(Error(`File could not be read! Code=${e?.target?.error?.code||-1}`))},r.readAsArrayBuffer(e)})),C=async e=>{let t;if("string"===typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0))):await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await S(e)}return new Uint8Array(t)},W=async(e,t)=>{const a=await fetch(e);let r;try{const i=parseInt(a.headers.get(O)||"-1"),n=a.body?.getReader();if(!n)throw k;const s=[];let o=0;for(;;){const{done:a,value:r}=await n.read(),l=r?r.length:0;if(a){if(-1!=i&&i!==o)throw F;t&&t({url:e,total:i,received:o,delta:l,done:a});break}s.push(r),o+=l,t&&t({url:e,total:i,received:o,delta:l,done:a})}const l=new Uint8Array(o);let c=0;for(const e of s)l.set(e,c),c+=e.length;r=l.buffer}catch(i){r=await a.arrayBuffer(),t&&t({url:e,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},U=async(e,t,a=!1,r)=>{const i=a?await W(e,r):await(await fetch(e)).arrayBuffer(),n=new Blob([i],{type:t});return URL.createObjectURL(n)};var B=a(1103);const M={class:"video-transform"},j=(0,n.createTextVNode)("select file");var N={setup(e){const t=(0,n.ref)(null),a=new T,s="https://unpkg.com/@ffmpeg/core@0.12.2/dist/umd";async function o(e){try{await a.load({coreURL:await U(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await U(`${s}/ffmpeg-core.wasm`,"application/wasm")});let r=await C(e.raw);await a.writeFile("input.wmv",r),await a.exec(["-i","input.wmv","-f","mp4","output.mp4"]);const i=await a.readFile("output.mp4");t.value.src=URL.createObjectURL(new Blob([i.buffer],{type:"video/mp4"}))}catch(r){B.z8.error({message:r.message})}}return(e,a)=>{const s=i.ElButton,l=r.LW;return(0,n.openBlock)(),(0,n.createElementBlock)("div",M,[(0,n.createVNode)(l,{ref:(e,t)=>{t["uploadRef"]=e},class:"upload-demo",accept:"video/*","auto-upload":!1,"on-change":o},{trigger:(0,n.withCtx)((()=>[(0,n.createVNode)(s,{type:"primary"},{default:(0,n.withCtx)((()=>[j])),_:1})])),_:1},512),(0,n.createElementVNode)("video",{class:"video",ref:(e,a)=>{a["video"]=e,t.value=e}},null,512)])}}},P=a(9110);const x=(0,P.Z)(N,[["__scopeId","data-v-60d1a494"]]);var G=x},817:function(e,t,a){a(5813)},4950:function(e,t,a){a(5813)}}]);